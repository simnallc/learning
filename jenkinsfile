pipeline{
    
    agent any
    
    environment{
        dockerImage = ""
        registry = "ajayrao515/training"
        registryCredential = "dockerhub_ID"
    }
    
        stage("build docker image") {
            steps{
                script{
                    sh "docker build -t ajayrao515/training ."
                }
            }    
        }
        stage("push image to dockerhub"){
            steps{
                script{
                 withCredentials([string(credentialsId: 'dockerhubv1', variable: 'dockerhubv1')]) {
                sh "docker login -u ajayrao515 -p ${dockerhubv1}"
}
                sh "docker push ajayrao515/training"
                }
            }
        }
    }   
}



     
